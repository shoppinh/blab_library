---
sidebar_position: 4
---
import GivenProvider from "@site/src/components/smart-contracts/eth-personal/given-provider";
import SetProvider from "@site/src/components/smart-contracts/eth-personal/set-provider";
import NewAccount from "@site/src/components/smart-contracts/eth-personal/new-account";
import Sign from "@site/src/components/smart-contracts/eth-personal/sign";
import SingTransaction from "@site/src/components/smart-contracts/eth-personal/sign-transaction";
import SendTransaction from "@site/src/components/smart-contracts/eth-personal/send-transaction";

# Tương tác với các tài khoản trên node

Gói `Web3-eth-personal` cho phép bạn tương tác với các tài khoản Ethereum Node.
:::note
Nhiều trong số các chức năng này gửi thông tin nhạy cảm như mật khẩu.Không bao giờ gọi các chức năng này qua nhà cung cấp WebSocket hoặc HTTP không có bảo đảm, vì mật khẩu của bạn sẽ được gửi bằng văn bản đơn giản!
:::
```javascript
var Personal = require('web3-eth-personal');

// "Personal.providers.givenProvider" will be set if in an Ethereum supported browser.
var personal = new Personal(Personal.givenProvider || 'ws://some.local-or-remote.node:8546');


// or using the web3 umbrella package

var Web3 = require('web3');
var web3 = new Web3(Web3.givenProvider || 'ws://some.local-or-remote.node:8546');

// -> web3.eth.personal
```
## Đặt nhà cung cấp
```javascript
web3.setProvider(myProvider)
web3.eth.setProvider(myProvider)
web3.shh.setProvider(myProvider)
web3.bzz.setProvider(myProvider)
...
```
Sẽ thay đổi nhà cung cấp cho mô -đun của nó.
:::note

Khi được gọi trên gói Umbrella Web3, nó cũng sẽ đặt nhà cung cấp cho tất cả các mô -đun phụ Web3.eth, Web3.shh, v.v. ngoại trừ Web3.bzz cần một nhà cung cấp riêng biệt mọi lúc.
:::
### Thông số
`Object` - MyProvider: một nhà cung cấp hợp lệ.
### Trả lại
`Boolean`
### Ví dụ: Nút Geth cục bộ
```javascript
var Web3 = require('web3');
var web3 = new Web3('http://localhost:8545');
// or
var web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:8545'));

// change provider
web3.setProvider('ws://localhost:8546');
// or
web3.setProvider(new Web3.providers.WebsocketProvider('ws://localhost:8546'));

// Using the IPC provider in node.js
var net = require('net');
var web3 = new Web3('/Users/myuser/Library/Ethereum/geth.ipc', net); // mac os path
// or
var web3 = new Web3(new Web3.providers.IpcProvider('/Users/myuser/Library/Ethereum/geth.ipc', net)); // mac os path
// on windows the path is: "\\\\.\\pipe\\geth.ipc"
// on linux the path is: "/users/myuser/.ethereum/geth.ipc"
```
### Ví dụ: Nhà cung cấp nút từ xa
```javascript
// Using a remote node provider, like Alchemy (https://www.alchemyapi.io/supernode), is simple.
var Web3 = require('web3');
var web3 = new Web3("https://eth-mainnet.alchemyapi.io/v2/your-api-key");
```
### Thử nghiệm
<SetProvider/>

## Đưa ra nhà cung cấp
```javascript
web3.givenProvider
web3.eth.givenProvider
web3.shh.givenProvider
web3.bzz.givenProvider
...
```
Khi sử dụng web3.js trong trình duyệt tương thích Ethereum, nó sẽ được đặt với nhà cung cấp gốc hiện tại bởi trình duyệt đó.Sẽ trả lại nhà cung cấp đã cho bởi môi trường (trình duyệt), nếu không thì không.
### Trả lại
`Object`: Các nhà cung cấp đã cho hoặc null;
### Thử nghiệm
<GivenProvider/>
## Tài khoản mới
```javascript
web3.eth.personal.newAccount(password, [callback])
Creates a new account.
```
:::note

Không bao giờ gọi chức năng này qua nhà cung cấp WebSocket hoặc HTTP không có bảo đảm, vì mật khẩu của bạn sẽ được gửi bằng văn bản đơn giản!
:::
### Thông số
`Mật khẩu` -` String`: Mật khẩu để mã hóa tài khoản này bằng.
### Trả lại
`Promise` trả về` String`: địa chỉ của tài khoản mới được tạo.

### Ví dụ
```javascript
web3.eth.personal.newAccount('!@superpassword')
.then(console.log);
> '0x1234567891011121314151617181920212223456'
```
### Thử nghiệm
<NewAccount/>
## Ký
```javascript
web3.eth.personal.sign(dataToSign, address, password [, callback])
```
Phương pháp dấu hiệu tính toán một chữ ký cụ thể Ethereum với:
```javascript
sign(keccak256("\x19Ethereum Signed Message:\n" + dataToSign.length + dataToSign)))
```
Thêm một tiền tố vào thông báo làm cho chữ ký được tính toán có thể nhận ra là chữ ký cụ thể của Ethereum.

Nếu bạn có tin nhắn gốc và tin nhắn đã ký, bạn có thể khám phá địa chỉ tài khoản ký bằng Web3.eth.personal.ecrecover.Xem ví dụ dưới đây.
:::note

Gửi mật khẩu tài khoản của bạn qua kết nối HTTP RPC không có bảo đảm là rất không an toàn.
:::
### Thông số
1. `String` - Dữ liệu để ký.Nếu chuỗi nó sẽ được chuyển đổi bằng Web3.utils.utf8tohex.
2. `String` - Địa chỉ để ký dữ liệu với.
3. `String` - Mật khẩu của tài khoản để ký dữ liệu.
4. `function` - (tùy chọn) gọi lại tùy chọn, trả về một đối tượng lỗi làm tham số đầu tiên và kết quả là thứ hai.
### Trả lại
`Promise` trả về` String` - chữ ký.
### Ví dụ
```javascript
web3.eth.personal.sign("Hello world", "0x11f4d0A3c12e86B4b5F39B213F7E19D048276DAe", "test password!")
.then(console.log);
> "0x30755ed65396facf86c53e6217c52b4daebe72aa4941d89635409de4c9c7f9466d4e9aaec7977f05e923889b33c0d0dd27d7226b6e6f56ce737465c5cfd04be400"

// the below is the same
web3.eth.personal.sign(web3.utils.utf8ToHex("Hello world"), "0x11f4d0A3c12e86B4b5F39B213F7E19D048276DAe", "test password!")
.then(console.log);
> "0x30755ed65396facf86c53e6217c52b4daebe72aa4941d89635409de4c9c7f9466d4e9aaec7977f05e923889b33c0d0dd27d7226b6e6f56ce737465c5cfd04be400"

// recover the signing account address using original message and signed message
web3.eth.personal.ecRecover("Hello world", "0x30755ed65396...etc...")
.then(console.log);
> "0x11f4d0A3c12e86B4b5F39B213F7E19D048276DAe"
```
### Thử nghiệm
<Sign/>
## Ký giao dịch
```javascript
web3.eth.personal.signTransaction(transaction, password [, callback])
```
Ký một giao dịch.Tài khoản này cần được mở khóa.
:::note

Gửi mật khẩu tài khoản của bạn qua kết nối HTTP RPC không có bảo đảm là rất không an toàn.
:::

### Thông số
1. `Object` - Dữ liệu giao dịch để ký Web3.eth.SendTransaction () để biết thêm.
2. `String` - Mật khẩu của tài khoản, để ký giao dịch với.
3. `Function` - (Tùy chọn) Cuộc gọi lại tùy chọn, trả về một đối tượng lỗi làm tham số đầu tiên và kết quả là thứ hai.
###Trả lại
`Promise` trả về` Object` - Giao dịch được mã hóa RLP.Thuộc tính RAW có thể được sử dụng để gửi giao dịch bằng Web3.eth.SendsignTransaction.
### Ví dụ
```javascript
web3.eth.signTransaction({
    from: "0xEB014f8c8B418Db6b45774c326A0E64C78914dC0",
    gasPrice: "20000000000",
    gas: "21000",
    to: '0x3535353535353535353535353535353535353535',
    value: "1000000000000000000",
    data: ""
}, 'MyPassword!').then(console.log);
> {
    raw: '0xf86c808504a817c800825208943535353535353535353535353535353535353535880de0b6b3a76400008025a04f4c17305743700648bc4f6cd3038ec6f6af0df73e31757007b7f59df7bee88da07e1941b264348e80c78c4027afc65a87b0a5e43e86742b8ca0823584c6788fd0',
    tx: {
        nonce: '0x0',
        gasPrice: '0x4a817c800',
        gas: '0x5208',
        to: '0x3535353535353535353535353535353535353535',
        value: '0xde0b6b3a7640000',
        input: '0x',
        v: '0x25',
        r: '0x4f4c17305743700648bc4f6cd3038ec6f6af0df73e31757007b7f59df7bee88d',
        s: '0x7e1941b264348e80c78c4027afc65a87b0a5e43e86742b8ca0823584c6788fd0',
        hash: '0xda3be87732110de6c1354c83770aae630ede9ac308d9f7b399ecfba23d923384'
    }
}
```
### Thử nghiệm
<SingTransaction/>
## Gửi giao dịch
```javascript
web3.eth.personal.sendTransaction(transactionOptions, password [, callback])
```
Phương pháp này gửi một giao dịch qua API quản lý.

:::note

Gửi mật khẩu tài khoản của bạn qua kết nối HTTP RPC không có bảo đảm là rất không an toàn.
### Thông số
1. `Object` - Các tùy chọn giao dịch
2. `String` - Cụm mật khẩu cho tài khoản hiện tại
3. `Function` - (Tùy chọn) Cuộc gọi lại tùy chọn, trả về một đối tượng lỗi làm tham số đầu tiên và kết quả là thứ hai.hai.
### Trả lại
`Promise <String>` - Giao dịch băm.
### Ví dụ
```javascript
web3.eth.personal.sendTransaction({
    from: "0xEB014f8c8B418Db6b45774c326A0E64C78914dC0",
    gasPrice: "20000000000",
    gas: "21000",
    to: '0x3535353535353535353535353535353535353535',
    value: "1000000000000000000",
    data: ""
}, 'MyPassword!').then(console.log);
> '0xda3be87732110de6c1354c83770aae630ede9ac308d9f7b399ecfba23d923384'
```
### Thử nghiệm
<SendTransaction/>