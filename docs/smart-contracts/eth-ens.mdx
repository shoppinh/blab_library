---
sidebar_position: 5
---
import RegistryAddress from "@site/src/components/smart-contracts/eth-ens/registry-address";

import Registry  from "@site/src/components/smart-contracts/eth-ens/registry";
import Resolver  from "@site/src/components/smart-contracts/eth-ens/resolver";
import GetResolver  from "@site/src/components/smart-contracts/eth-ens/get-resolver";
import SetResolver  from "@site/src/components/smart-contracts/eth-ens/set-resolver";
import GetOwner  from "@site/src/components/smart-contracts/eth-ens/get-owner";
import SetOwner  from "@site/src/components/smart-contracts/eth-ens/set-owner";
import GetAddress  from "@site/src/components/smart-contracts/eth-ens/get-address";
import SetAddress  from "@site/src/components/smart-contracts/eth-ens/set-address";
import GetPubkey  from "@site/src/components/smart-contracts/eth-ens/get-pubkey";
import SetPubkey  from "@site/src/components/smart-contracts/eth-ens/set-pubkey";

# Tương tác với dịch vụ tên trên blockchain

Các chức năng `Web3.eth.ens` cho phép bạn tương tác với ENS.Chúng tôi khuyên bạn nên đọc tài liệu ENS để hiểu sâu hơn về phần bên trong của dịch vụ tên.
## Địa chỉ đăng ký
```javascript
web3.eth.ens.registryAddress;
```
Thuộc tính RegistryAddress có thể được sử dụng để xác định địa chỉ đăng ký tùy chỉnh khi bạn được kết nối với một chuỗi không xác định.
:::note

Nếu không có địa chỉ nào được xác định, nó sẽ cố gắng phát hiện sổ đăng ký trên chuỗi mà bạn hiện đang kết nối và theo lệnh gọi của SetProvider trong mô -đun ETH, nó sẽ giữ địa chỉ được xác định và sử dụng nó cho mô -đun ENS.
:::
### Trả lại
`String` - Địa chỉ của sổ đăng ký tùy chỉnh.

### Ví dụ
```javascript
web3.eth.ens.registryAddress;
> "0x314159265dD8dbb310642f98f50C066173C1259b"
```
### Thử nghiệm
<RegistryAddress/>
ENS không được hỗ trợ trong các mạng riêng.Bạn có thể thử ví dụ này trên mạng công cộng
## Đăng ký
```javascript
web3.eth.ens.registry;
```
Trả về sổ đăng ký cụ thể của mạng.
### Trả lại
`Registry` - Đăng ký hiện tại.

+ `Hợp đồng: Hợp đồng` - Hợp đồng` Đăng ký 'với giao diện mà chúng ta biết từ đối tượng hợp đồng.
+ `Chủ sở hữu (tên, gọi lại): Promise` - không dùng
+ `getowner (tên, gọi lại): Promise`
+ `setOwneer (tên, địa chỉ, txconfig, gọi lại): advievent`
+ `Resolver (tên, gọi lại): Promise
+ `getresolver (tên, gọi lại): Promise`
+ `setresolver (tên, địa chỉ, txconfig, gọi lại): advievent`
+ `getttl (tên, gọi lại): Promise`
+ `Settl (Tên, TTL, TXCONFIG, Callback): ARWIELENT`
+ `setSubNodeAwner (tên, nhãn, địa chỉ, txconfig, ralback): advievent`
+ `setRecord (tên, chủ sở hữu, người giải quyết, TTL, txconfig, gọi lại): advievent`
+ SetSubNoderecord (Tên, Nhãn, Chủ sở hữu, Resolver, TTL, TXConfig, Callback): ARMIELENT`
+ `setApprovalForall (toán tử, được phê duyệt, txconfig, gọi lại): advievent`
+ `Isapprovedforall (chủ sở hữu, nhà điều hành, gọi lại): hứa hẹn
+ `RecordExists (tên, gọi lại): Promise`
### Ví dụ
```javascript
web3.eth.ens.registry;
> {
    contract: Contract,
    owner: Function(name, callback), // Deprecated
    getOwner: Function(name, callback),
    setOwner: Function(name, address, txConfig, callback),
    resolver: Function(name, callback), // Deprecated
    getResolver: Function(name, callback),
    setResolver: Function(name, address, txConfig, callback),
    getTTL: Function(name, callback),
    setTTL: Function(name, ttl, txConfig, callback),
    setSubnodeOwner: Function(name, label, address, txConfig, callback),
    setRecord(name, owner, resolver, ttl, txConfig, callback),
    setSubnodeRecord(name, label, owner, resolver, ttl, txConfig, callback),
    setApprovalForAll(operator, approved, txConfig, callback),
    isApprovedForAll(owner, operator, txConfig, callback),
    recordExists(name, callback)
}
```
### Thử nghiệm

<Registry/>
ENS không được hỗ trợ trong các mạng riêng.Bạn có thể thử ví dụ này trên mạng công cộng
## Người giải quyết
```javascript
web3.eth.ens.resolver(name [, callback]);
```
Trả lại hợp đồng người giải quyết cho một địa chỉ Ethereum.
:::note

Phương pháp này không được dùng để sử dụng getresolver
### Thông số
1. `name` -` String`: Tên es.
2. `Callback` -` function`: (Tùy chọn) Gọi lại tùy chọn
### Trả lại
`Hứa <Resolver>` - Người giải quyết được cho tên này.
### Example
```jVí dụpt
web3.eth.ens.resolver('ethereum.eth').then(function (contract) {
    console.log(contract);
});
> Contract<Resolver>
```
### Thử nghiệm
<Resolver/>

## Nhận người giải quyết
```javascript
web3.eth.ens.getResolver(name [, callback]);
```
Trả lại hợp đồng người giải quyết cho một địa chỉ Ethereum.
### Thông số
1. `name` - `String`: Tên es.
2. `Callback` -` function`: (Tùy chọn) Gọi lại tùy chọn
### Trả lại
`Hứa <Resolver>` - Người giải quyết được cho tên này.
### Ví dụ
```javascript
web3.eth.ens.getResolver('ethereum.eth').then(function (contract) {
    console.log(contract);
});
> Contract<Resolver>
```
### Thử nghiệm
<GetResolver/>

## Đặt bộ giải quyết
```javascript
web3.eth.ens.setResolver(name, address [, txConfig ] [, callback]);
```
Đặt địa chỉ hợp đồng của người giải quyết của một tên.
### Thông số
1. `name` -` String`: Tên es.
2. `Địa chỉ` -` String`: Địa chỉ hợp đồng của hợp đồng giải quyết được triển khai.
3. `txconfig` -` object`: (tùy chọn) Các tùy chọn giao dịch như được mô tả ở đây
4. `Callback` -` function`: (Tùy chọn) Gọi lại tùy chọn
### Trả lại
`Advievent <Giao dịchReceipt |Giao dịchREVERTINSTRUSTRUSERROR> `
### Ví dụ
```javascript
web3.eth.ens.setResolver('ethereum.eth', '0x...', {...}).then(function (receipt) {
    console.log(receipt);
});
> {...}
```
### Thử nghiệm
ENS không được hỗ trợ trong các mạng riêng.Bạn có thể thử ví dụ này trên mạng công cộng{/* <SetResolver/> */}

## Nhận chủ sở hữu
```javascript
web3.eth.ens.getOwner(name [, callback]);
```
Trả về chủ sở hữu của một tên.
### Thông số
1. `name` -` String`: Tên es.
2. `Callback` -` function`: (Tùy chọn) Gọi lại tùy chọn
### Trả lại
`Promise<String>` - Địa chỉ của Nhà đăng ký (EOA hoặc CA).

### Ví dụ
```javascript
web3.eth.ens.getOwner('ethereum.eth').then(function (owner) {
    console.log(owner);
});
> '0x...'
```
### Thử nghiệm
ENS không được hỗ trợ trong các mạng riêng.Bạn có thể thử ví dụ này trên mạng công cộng{/* <GetOwner/> */}

## Đặt chủ sở hữu
```javascript
web3.eth.ens.setOwner(name [, txConfig ] [, callback]);
```
Đặt chủ sở hữu của tên đã cho.
### Thông số
1. `name` -` String`: Tên es.
2. `txconfig` -` object`: (tùy chọn) Các tùy chọn giao dịch như được mô tả ở đây
3. `Callback` -` function`: (Tùy chọn) Gọi lại tùy chọn
### Trả lại
`PromiEvent<TransactionReceipt | TransactionRevertInstructionError>`

### Ví dụ
```javascript
web3.eth.ens.setOwner('ethereum.eth', {...}).then(function (receipt) {
    console.log(receipt);
});
> {...}
```
### Thử nghiệm
{/* <SetOwner/> */}
ENS is not supported in private networks. You can try this example on a public network 

ENS không được hỗ trợ trong các mạng riêng.Bạn có thể thử ví dụ này trên mạng công cộng```javascript
web3.eth.ens.getAddress(ENSName [, callback]);
```
Giải quyết một tên riêng cho một địa chỉ Ethereum.
### Thông số
1. `Ensname` -` String`: Tên đảm bảo để giải quyết.
2. `Callback` -` function`: (Tùy chọn) Gọi lại tùy chọn
### Trả lại
`String` - Địa chỉ Ethereum của tên đã cho.

### Ví dụ
```javascript
web3.eth.ens.getAddress('ethereum.eth').then(function (address) {
    console.log(address);
})
> 0xfB6916095ca1df60bB79Ce92cE3Ea74c37c5d359
```
### Thử nghiệm
{/* <GetAddress/> */}
ENS không được hỗ trợ trong các mạng riêng.Bạn có thể thử ví dụ này trên mạng công cộng
## Đặt địa chỉ
```javascript
web3.eth.ens.setAddress(ENSName, address [, txConfig ] [, callback]);
```
Đặt địa chỉ của một tên ENS trong trình phân giải này.
### Thông số
1. `Ensname` -` String`: Tên es
2. `Địa chỉ` -` String`: Địa chỉ để đặt.
3. `txconfig` -` object`: (tùy chọn) Các tùy chọn giao dịch như được mô tả ở đây
4. `Callback` -` function`: (Tùy chọn) Gọi lại tùy chọn
Phát ra một sự kiện `addrchanged`.

### Trả lại
`PromiEvent<TransactionReceipt | TransactionRevertInstructionError>`

### Ví dụ
```javascript
web3.eth.ens.setAddress(
    'ethereum.eth',
    '0xfB6916095ca1df60bB79Ce92cE3Ea74c37c5d359',
    {
        from: '0x9CC9a2c777605Af16872E0997b3Aeb91d96D5D8c'
    Ví dụ
).then(function (result) {
         console.log(result.events);
});
> AddrChanged(...)

// Or using the event emitter

web3.eth.ens.setAddress(
    'ethereum.eth',
    '0xfB6916095ca1df60bB79Ce92cE3Ea74c37c5d359',
    {
        from: '0x9CC9a2c777605Af16872E0997b3Aeb91d96D5D8c'
    }
)
.on('transactionHash', function(hash){
    ...
})
.on('confirmation', function(confirmationNumber, receipt){
    ...
})
.on('receipt', function(receipt){
    ...
})
.on('error', console.error);

// Or listen to the AddrChanged event on the resolver

web3.eth.ens.resolver('ethereum.eth').then(function (resolver) {
    resolver.events.AddrChanged({fromBlock: 0}, function(error, event) {
        console.log(event);
    })
    .on('data', function(event){
        console.log(event);
    })
    .on('changed', function(event){
        // remove event from local database
    })
    .on('error', console.error);
});
```
### Thử nghiệm
{/* <SetAddress/> */}
ENS không được hỗ trợ trong các mạng riêng.Bạn có thể thử ví dụ này trên mạng công cộng

## Nhận khóa công khai
```javascript
web3.eth.ens.getPubkey(ENSName [, callback]);
```
Trả về tọa độ X và Y của điểm đường cong cho khóa công khai.
### Thông số
1. `Ensname` -` String`: Tên es
2. `Callback` -` function`: (Tùy chọn) Gọi lại tùy chọn
### Trả lại
`Promise<Object<String, String>>` - The X and Y coordinates.

### Ví dụ
```javascript
web3.eth.ens.getPubkey('ethereum.eth').then(function (result) {
    console.log(result)
});
> {
    "0": "0x0000000000000000000000000000000000000000000000000000000000000000",
    "1": "0x0000000000000000000000000000000000000000000000000000000000000000",
    "x": "0x0000000000000000000000000000000000000000000000000000000000000000",
    "y": "0x0000000000000000000000000000000000000000000000000000000000000000"
}
```
### Thử nghiệm
{/* <GetPubkey /> */}
ENS không được hỗ trợ trong các mạng riêng.Bạn có thể thử ví dụ này trên mạng công cộng
## Đặt khóa công khai
```javascript
web3.eth.ens.setPubkey(ENSName, x, y [, txConfig ] [, callback]);
```
Đặt khóa công khai SECP256K1 được liên kết với một nút bảo vệ.
### Thông số
1. `Ensname` -` String`: Tên es
2. `x` -` String`: tọa độ x của khóa công khai.
3. `y` -` String`: tọa độ y của khóa công khai.
4. `txconfig` -` object`: (tùy chọn) Các tùy chọn giao dịch như được mô tả ở đây
5. `callback` -` function`: (tùy chọn) Gọi lại tùy chọn
Phát ra một sự kiện `pubkeychanged`.

### Trả lại
`PromiEvent<TransactionReceipt | TransactionRevertInstructionError>`

### Ví dụ
```javascript
web3.eth.ens.setPubkey(
    'ethereum.eth',
    '0x0000000000000000000000000000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000000000000000000000000000',
    {
        from: '0x9CC9a2c777605Af16872E0997b3Aeb91d96D5D8c'
    }
).then(function (result) {
    console.log(result.events);
});
> PubkeyChanged(...)

// Or using the event emitter

web3.eth.ens.setPubkey(
    'ethereum.eth',
    '0x0000000000000000000000000000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000000000000000000000000000',
    {
        from: '0x9CC9a2c777605Af16872E0997b3Aeb91d96D5D8c'
    }
)
.on('transactionHash', function(hash){
    ...
})
.on('confirmation', function(confirmationNumber, receipt){
    ...
})
.on('receipt', function(receipt){
    ...
})
.on('error', console.error);

// Or listen to the PubkeyChanged event on the resolver

web3.eth.ens.resolver('ethereum.eth').then(function (resolver) {
    resolver.events.PubkeyChanged({fromBlock: 0}, function(error, event) {
        console.log(event);
    })
    .on('data', function(event){
        console.log(event);
    })
    .on('changed', function(event){
        // remove event from local database
    })
    .on('error', console.error);
});
```
### Thử nghiệm
{/* <SetPubkey /> */}
ENS không được hỗ trợ trong các mạng riêng.Bạn có thể thử ví dụ này trên mạng công cộng