---
sidebar_position: 2
---
import ShhSubscribeOption from "@site/src/components/message-filter/shh-subscribe-options"

# Đăng ký nhận tin nhắn
```javascript
web3.shh.subscribe('messages', options [, callback])
```
Đăng ký cho tin nhắn thì thầm đến.
### Thông số
1. `" Tin nhắn "` - Chuỗi: Loại đăng ký.
2. `Object` - Tùy chọn đăng ký:
+ `symkeyid` -` String`: ID của khóa đối xứng để giải mã thông báo.
+ `PrivateKeyid` -` String`: ID của khóa riêng (không đối xứng) để giải mã tin nhắn.
+ `sig` -` String` (tùy chọn): Khóa công khai của chữ ký, để xác minh.
+ `Các chủ đề`-` mảng` (tùy chọn khi được cung cấp khóa PrivateKeyId)): Các tin nhắn lọc theo chủ đề này.Mỗi chủ đề phải là chuỗi hex 4 byte.
+ `minpow` -` number` (tùy chọn): Yêu cầu POW tối thiểu cho các tin nhắn đến.
+ `allowp2p`-` boolean` (tùy chọn): Cho biết liệu bộ lọc này có cho phép xử lý các thông báo ngang hàng trực tiếp hay không (không được chuyển tiếp nữa, vì chúng có thể hết hạn).Đây có thể là trường hợp trong một số trường hợp rất hiếm, ví dụ:Nếu bạn có ý định giao tiếp với người quản lý thư, v.v.
3. `Callback` -` Function`: (Tùy chọn) Cuộc gọi lại tùy chọn, trả về một đối tượng lỗi làm tham số đầu tiên và kết quả là thứ hai.Sẽ được gọi cho mỗi đăng ký đến và bản thân đăng ký là 3 tham số.
### Trả lại thông báo
`ObjThông báo trả về:
+ `Hash` -` String`: Hash của thông báo được bao bọc.
+ `sig` -` String`: khóa công khai đã ký tin nhắn này.
+ `reerPientPublicKey` -` String`: Khóa công khai của người nhận.
+ `Timestamp` -` String`: Unix Dấu thời gian của Tạo thông báo.
+ `ttl`-` number`: thời gian sống trong giây.
+ `Chủ đề` -` String`: 4 byte Chủ đề tin nhắn chuỗi Hex.
+ `Tải trọng` -` String`: Tải trọng được giải mã.
+ `padding` -` number`: đệm tùy chọn (mảng byte có độ dài tùy ý).
+ `pow` -` number`: bằng chứng về giá trị công việc.
### Ví dụ
```javascript
web3.shh.subscribe('messages', {
symKeyID: 'bf31b9ffc2387e18636e0a3d0c56b023264c16e78a2adcba1303cefc685e610f',
sig: '0x04d1574d4eab8f3dde4d2dc7ed2c4d699d77cbbdd09167b8fffa099652ce4df00c4c6e0263eafe05007a46fdf0c8d32b11aeabcd3abbc7b2bc2bb967368a68e9c6',
ttl: 20,
topics: ['0xffddaa11'],
minPow: 0.8,
}, function(error, message, subscription){

    console.log(message);
    > {
        "hash": "0x4158eb81ad8e30cfcee67f20b1372983d388f1243a96e39f94fd2797b1e9c78e",
        "padding": "0xc15f786f34e5cef0fef6ce7c1185d799ecdb5ebca72b3310648c5588db2e99a0d73301c7a8d90115a91213f0bc9c72295fbaf584bf14dc97800550ea53577c9fb57c0249caeb081733b4e605cdb1a6011cee8b6d8fddb972c2b90157e23ba3baae6c68d4f0b5822242bb2c4cd821b9568d3033f10ec1114f641668fc1083bf79ebb9f5c15457b538249a97b22a4bcc4f02f06dec7318c16758f7c008001c2e14eba67d26218ec7502ad6ba81b2402159d7c29b068b8937892e3d4f0d4ad1fb9be5e66fb61d3d21a1c3163bce74c0a9d16891e2573146aa92ecd7b91ea96a6987ece052edc5ffb620a8987a83ac5b8b6140d8df6e92e64251bf3a2cec0cca",
        "payload": "0xdeadbeaf",
        "pow": 0.5371803278688525,
        "recipientPublicKey": null,
        "sig": null,
        "timestamp": 1496991876,
        "topic": "0x01020304",
        "ttl": 50
    }
})
// or
.on('data', function(message){ ... });
```
### Sự thử nghiệm
<ShhSubscribeOption/>